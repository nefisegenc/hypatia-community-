rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Başvuru koleksiyonuna erişim kuralları
    match /joinRequests/{document=**} {
      // Okuma izni olan e-postalar
      function isAuthorizedReader() {
        return request.auth.token.email in [
          'authorized1@example.com',
          'authorized2@example.com'
          // Daha fazla e-posta ekleyebilirsiniz
        ];
      }
      
      // Okuma kuralı
      allow read: if isAuthorizedReader();
      
      // Yazma kuralı - sadece uygulamadan gelen isteklere izin ver
      allow write: if request.auth == null 
        && request.resource.data.keys().hasAll(['name', 'email', 'createdAt']);
    }
    
    // Diğer koleksiyonlar için varsayılan kural
    match /{document=**} {
      allow read, write: if false;
    }
  }
}